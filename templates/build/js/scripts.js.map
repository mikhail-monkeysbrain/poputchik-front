{"version":3,"sources":["js/components/Utils.js","js/components/Loader.js","js/components/Multiloader.js","js/components/Size.js","js/core/Behavior.js","js/core/View.js","js/core/BView/Page.js","js/behaviors/Behavior1.js","js/BView/Footer.js","js/BView/GlobalView.js","js/BView/Header.js","js/BView/Index.js","js/BView/NotFound.js","js/BView/subView/subView1.js","js/Router.js","js/script.js","../gulp/modules/svg-sprite/assets/js/script.js"],"names":["app","utils","getData","getScrollPosition","window","scrollY","undefined","document","documentElement","scrollTop","okonchanie","number","one","two","five","poslezpt","parseInt","parseFloat","length","substr","isIPhone","test","navigator","userAgent","parseUrlQuery","link","qu","indexOf","data","i","param","pair","location","search","split","insertParam","key","value","encodeURI","kvp","x","join","tempArr","_","each","num","push","insertParam2","url","scrollWidth","div","createElement","style","overflowY","width","height","visibility","body","appendChild","offsetWidth","clientWidth","removeChild","doubleNumber","toString","getDirection","direction","lastScrollTop","init","self","$","scroll","heightLikeWindow","$obj","context","_helper","on","css","Size","sizeLikeWindow","getSize","options","getBackgroundImageUrl","currentStyle","getComputedStyle","backgroundImage","slice","replace","functionByState","state","functions","getState","func","isString","property","isFunction","arguments","isObject","noop","get","apply","f","devices","device","functionByDevice","bind","Adaptive","getDeviceType","components","Loader","obj","isVisible","nobg","_init","prototype","show","addClass","fadeIn","hide","_hide","stop","fadeOut","removeClass","Multiloader","MultiLoader","minQueue","_queue","_callback","_minQueue","_lastCreatedStack","addCallback","callback","scope","_scope","createStack","that","myNum","_checkStack","stackNum","every","_androidDelay","_minWidth","_minHeight","__bind","fn","me","_this","_events","orientationChange","dom","$window","setTimeout","prevHeight","prevWidth","Modernizr","touch","innerHeight","Math","max","trigger","ns","Behavior","Backbone","View","extend","target","initialize","config","params","defaults","render","core","__super__","$targets","initAll","remove","stopListening","map","flow","initEach","getParams","result","datas","dataName","paramName","getOption","validator","ops","dfs","candidats","res","negate","isUndefined","_getValue","find","subView","constructor","newOptions","applyOptions","call","behaviors","subViews","normalizeEvents","_setElement","initUIs","initTpls","clearBehaviors","initBehaviors","clearSubViews","initSubViews","off","clearUIs","clearTpls","applyList","pick","option","optionName","clone","ui","reduce","_ui","selector","gui","_gui","invoke","events","normalizeKeys","hash","memo","val","normalizedKey","normalizeUIString","uiString","r","tpls","_tpls","$tpl","tpl","html","template","_behaviors","el","behavior","$el","item","_subViews","normalizeSubViewParams","SubView","_subView","Page","loader","popup","needGoIn","className","pageHolder","$bigGallery","defLoadAllImages","defGoIn","defLoaderHide","defaultLoaderHide","checkGetParams","setProps","Deferred","defRenderEnd","when","done","goIn","GlobalView","append","setElement","$waitToLoad","all","multiLoader","resolve","image","Image","onload","is","attr","src","afterRender","$target","Router","_pageCounter","load","animate","offset","top","goOutDefault","initGoto","e","preventDefault","Header","Behavior1","console","log","Footer","views","oldViews","currentView","menuItems","selectCurrentMenu","id","filter","once","setTitle","title","Index","_calendar","book1","book2","book3","book4","book5","book6","book7","datepicker","numberOfMonths","language","minDate","beforeShowDay","date","m","getMonth","d","getDate","y","getFullYear","$b7","inArray","$b6","$b5","$b4","$b3","$b2","$b1","onSelect","dateText","inst","slideUp","slideDown","_selectPlace","click","hasClass","toggleClass","ready","NotFound","subView1","cls","modules","routes","lastPath","curPath","baseRout","path","history","fragment","view","$view","trim","p1","p2","p3","now","jsview","sectionId","back","navigate","svg4everybody"],"mappings":"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","file":"scripts.js","sourcesContent":["(function () {\r\n  'use strict'\r\n\r\n  // app.utils.transformPrefix = Modernizr.testAllProps('transform','pfx');\r\n\r\n  // app.utils.transitionPrefix = Modernizr.testAllProps('transition','pfx');\r\n\r\n  app.utils.getData = null\r\n  /**\r\n   * Возвращает текущую позицию скрола\r\n   * @returns {Number}\r\n   */\r\n  app.utils.getScrollPosition = function () {\r\n    if (window.scrollY !== undefined) {\r\n      return window.scrollY\r\n    } else if (document.documentElement && document.documentElement.scrollTop) { // for ie\r\n      return document.documentElement.scrollTop\r\n    }\r\n    return 0\r\n  }\r\n\r\n  /**\r\n   * Склоняем слова\r\n   * @param {Number}  number\r\n   * @param {String}  one\r\n   * @param {String}  two\r\n   * @param {String}  five\r\n   * @returns {*}\r\n   */\r\n  app.utils.okonchanie = function (number, one, two, five) {\r\n    const poslezpt = parseInt(number) !== parseFloat(number)\r\n\r\n    number += ''\r\n    if ((number.length > 1 && +number.substr(number.length - 2, 1) === '1') || (+number.substr(number.length - 1, 1) > 4 && +number.substr(number.length - 1, 1) < 10 && !poslezpt)) {\r\n      // 10 - 19 || 5 - 10\r\n      return five\r\n    } else if (number.substr(number.length - 1, 1) === '1' && !poslezpt) {\r\n      // 1\r\n      return one\r\n    } else {\r\n      // 2 - 4, 1.5\r\n      return two\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Определяем мобильное или нет устройство\r\n   * @return {boolean}\r\n   */\r\n  app.utils.isIPhone = function () {\r\n    return /iPhone|iPod/i.test(navigator.userAgent)\r\n  }\r\n\r\n  /**\r\n   * Парсит GET. Возвращает объект в виде ключ -> значение\r\n   * @returns {Object}\r\n   */\r\n  app.utils.parseUrlQuery = function (link) {\r\n    let qu = link && link.indexOf('?')\r\n    let data = {}\r\n    let i\r\n    let param\r\n    let pair\r\n\r\n    if (link) {\r\n      if (qu !== -1) {\r\n        link = link.substr(qu + 1)\r\n      } else {\r\n        link = null\r\n      }\r\n    } else {\r\n      link = location.search && location.search.substr(1)\r\n    }\r\n\r\n    if (link) {\r\n      pair = (link).split('&')\r\n      for (i = 0; i < pair.length; i++) {\r\n        param = pair[i].split('=')\r\n        data[param[0]] = param[1]\r\n      }\r\n    }\r\n    return data\r\n  }\r\n\r\n  /**\r\n   * Добавляем get параметр в урл\r\n   * @param {String}  key\r\n   * @param {String}  value\r\n   */\r\n  app.utils.insertParam = function (key, value) {\r\n    key = encodeURI(key)\r\n    value = encodeURI(value)\r\n\r\n    const kvp = document.location.search.substr(1).split('&')\r\n    let i = kvp.length\r\n    let x\r\n    while (i--) {\r\n      x = kvp[i].split('=')\r\n      // console.log(x, i);\r\n      if (x[0] === key) {\r\n        x[1] = value\r\n        kvp[i] = x.join('=')\r\n        break\r\n      }\r\n    }\r\n\r\n    if (i < 0) {\r\n      kvp[kvp.length] = [key, value].join('=')\r\n    }\r\n\r\n    // this will reload the page, it's likely better to store this until finished\r\n    // document.location.search = kvp.join('&');\r\n    const tempArr = []\r\n    _.each(kvp, function (num) {\r\n      if (num !== '') {\r\n        tempArr.push(num)\r\n      }\r\n    })\r\n    return '?' + tempArr.join('&')\r\n  }\r\n\r\n  app.utils.insertParam2 = function (url, key, value) {\r\n    // console.log(url)\r\n    key = encodeURI(key)\r\n    value = encodeURI(value)\r\n\r\n    if (url.indexOf('?') !== -1) {\r\n      url += '&' + [key, value].join('=')\r\n    } else {\r\n      url += '?' + [key, value].join('=')\r\n    }\r\n\r\n    return url\r\n  }\r\n\r\n  /**\r\n   * получаем ширину системного скролла\r\n   * @return {number} Ширина скролла.\r\n   */\r\n  app.utils.scrollWidth = function () {\r\n    // создадим элемент с прокруткой\r\n    const div = document.createElement('div')\r\n\r\n    div.style.overflowY = 'scroll'\r\n    div.style.width = '50px'\r\n    div.style.height = '50px'\r\n\r\n    // при display:none размеры нельзя узнать\r\n    // нужно, чтобы элемент был видим,\r\n    // visibility:hidden - можно, т.к. сохраняет геометрию\r\n    div.style.visibility = 'hidden'\r\n\r\n    document.body.appendChild(div)\r\n    const scrollWidth = div.offsetWidth - div.clientWidth\r\n    document.body.removeChild(div)\r\n    return scrollWidth\r\n  }\r\n\r\n  /**\r\n   * Делает из однозначиного число, двузначное (с нулем перед значением)\r\n   * @param number\r\n   * @returns {string}\r\n   */\r\n  app.utils.doubleNumber = function (number) {\r\n    number = number.toString()\r\n    return number.length === 1 ? '0' + number : number\r\n  }\r\n\r\n  /**\r\n   * направление скролла window\r\n   */\r\n  app.utils.getDirection = {\r\n    direction: 1,\r\n    lastScrollTop: 0,\r\n    init: function () {\r\n      const self = this\r\n      $(window).scroll(function () {\r\n        const scroll = $(window).scrollTop()\r\n\r\n        if (self.lastScrollTop <= scroll) {\r\n          self.direction = 1\r\n        } else {\r\n          self.direction = -1\r\n        }\r\n        self.lastScrollTop = scroll\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Задает элементу высоту окна и подпивысает на ресайз\r\n   * @param $obj - jQuery object\r\n   * @param context - Object\r\n   */\r\n  app.utils.heightLikeWindow = function ($obj, context) {\r\n    _helper()\r\n    app.on('resize', _helper, context)\r\n\r\n    function _helper () {\r\n      $obj.css({'height': app.Size.height})\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Задает элементу высоту и ширину окна и подпивысает на ресайз\r\n   * @param $obj - jQuery object\r\n   * @param context - Object\r\n   */\r\n  app.utils.sizeLikeWindow = function ($obj, context) {\r\n    _helper(app.Size.getSize())\r\n    app.on('resize', _helper, context)\r\n\r\n    function _helper (options) {\r\n      $obj.css(options)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Получаем путь background-image\r\n   * @param $obj - jQuery object\r\n   */\r\n  app.utils.getBackgroundImageUrl = function ($obj) {\r\n    const style = $obj[0].currentStyle || window.getComputedStyle($obj[0], false)\r\n    return style.backgroundImage.slice(4, -1).replace(/\"/g, '')\r\n  }\r\n\r\n  /**\r\n  * Создает функцию передающую полномочия одной из указанных функций, в зависимости от условия в state\r\n  * Функция используется для создания комплексного метода объекта\r\n  * @example\r\n  * O = {\r\n  *   method: app.utils.functionByState(<...>)\r\n  * }\r\n  * Может вызываться как: app.utils.functionByState(state,functions) или app.utils.functionByState(functions)\r\n  * Где state может быть типа:\r\n  *  string - название свойства объекта\r\n  *  function - функция, возвращающея значение state определяющее искомую функцию в functions\r\n  *  или по умолчанию 'state'\r\n  * а functions - хэш функций, где ключами выступают возможные значения state или 'default' для действия по уолчанию\r\n  *\r\n  * При неверно заданных параметрах или отстуствующем в functions state возвращает функцию _.noop (которая возвращает undefined)\r\n  *\r\n  * @author Koshevarov Sergey <gondragos@gmail.com>\r\n  */\r\n  app.utils.functionByState = function (state, functions) {\r\n    let getState\r\n    let func\r\n    if (_.isString(state)) {\r\n      getState = _.property(state)\r\n    } else if (_.isFunction(state)) {\r\n      getState = state\r\n    } else if (arguments.length === 1 && _.isObject(state)) {\r\n      getState = _.property('state')\r\n      functions = state\r\n    } else {\r\n      return _.noop\r\n    }\r\n    func = function func () {\r\n      return _.get(func, getState(this), _.get(func, 'default', _.noop)).apply(this, arguments)\r\n    }\r\n    _.each(functions, function (f, devices) {\r\n      devices = devices.split(',')\r\n      _.each(devices, function (device) {\r\n        func[device] = f\r\n      })\r\n    })\r\n    return func\r\n  }\r\n\r\n  /**\r\n   * Частный случай app.utils.functionByState в качестве state использующий текущее значение deviceType в app.Adaptive\r\n   *\r\n   * @author Koshevarov Sergey <gondragos@gmail.com>\r\n   */\r\n  app.utils.functionByDevice = function (functions) {\r\n    return app.utils.functionByState(_.bind(app.Adaptive.getDeviceType, app.Adaptive), functions)\r\n  }\r\n})()\r\n","app.components.Loader = (function () {\r\n  'use strict'\r\n\r\n  function Loader () {\r\n    const self = this\r\n    this.obj = null\r\n    this.isVisible = false\r\n    this.nobg = false\r\n\r\n    function _init () {\r\n      // self.obj = $(tpl);\r\n      // self.obj.appendTo('.grid').hide();\r\n      self.obj = $('.js-loader')\r\n    }\r\n\r\n    _init()\r\n  }\r\n\r\n  Loader.prototype.show = function () {\r\n    if (!this.isVisible) {\r\n      if (this.nobg) {\r\n        this.obj.addClass('_nobg')\r\n      }\r\n      this.obj.fadeIn(300, function () {\r\n        // app.dom.$window.scrollTop(0);\r\n      })\r\n      this.isVisible = true\r\n    }\r\n    return this\r\n  }\r\n\r\n  Loader.prototype.hide = function () {\r\n    const self = this\r\n    if (self.isVisible) {\r\n      _hide()\r\n    }\r\n\r\n    function _hide () {\r\n      self.obj.stop().fadeOut(1000).removeClass('_nobg')\r\n      self.nobg = false\r\n      self.isVisible = false\r\n    }\r\n  }\r\n\r\n  return new Loader()\r\n})()\r\n","'use strict'\r\n\r\napp.components.Multiloader = (function () {\r\n  /**\r\n   * @param minQueue\r\n   * @constructor\r\n   */\r\n  const MultiLoader = function (minQueue) {\r\n    this._queue = []\r\n    this._callback = null\r\n    this._minQueue = minQueue || 0\r\n    this._lastCreatedStack = 0\r\n\r\n    for (let i = 0; i < this._minQueue; i++) {\r\n      this._queue.push(false)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Добавляем callback, который выполнится, когда все отложенные события будут завершены\r\n   * @param callback\r\n   * @param [scope]\r\n   */\r\n  MultiLoader.prototype.addCallback = function (callback, scope) {\r\n    this._callback = callback\r\n    this._scope = scope || this\r\n  }\r\n\r\n  /**\r\n   * Создаеит и возвращает функцию, которая при выполнении отметит стек как выполненный\r\n   * @returns {Function}\r\n   */\r\n  MultiLoader.prototype.createStack = function () {\r\n    const that = this\r\n    let myNum = that._lastCreatedStack++\r\n\r\n    if (myNum > this._queue.length - 1) {\r\n      that._queue.push(false)\r\n    }\r\n\r\n    return function () {\r\n      that._checkStack(myNum)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Проверка стека за определенным номером\r\n   * @param stackNum\r\n   * @private\r\n   */\r\n  MultiLoader.prototype._checkStack = function (stackNum) {\r\n    this._queue[stackNum] = true\r\n\r\n    if (_.every(this._queue)) {\r\n      if (typeof this._callback === 'function') {\r\n        this._callback.apply(this._scope)\r\n      }\r\n    }\r\n  }\r\n\r\n  return MultiLoader\r\n})()\r\n","'use strict'\r\n\r\napp.Size = (function () {\r\n  const _androidDelay = 300\r\n  const _minWidth = 320\r\n  const _minHeight = 212\r\n\r\n  function Size () {\r\n    const __bind = function (fn, me) {\r\n      return function () {\r\n        return fn.apply(me, arguments)\r\n      }\r\n    }\r\n    const _this = this\r\n    let _events = /iPod|iPad|iPhone/g.test(navigator.userAgent) ? 'orientationchange load' : 'resize load' // айфон или все остальные\r\n\r\n    _this.width = null\r\n    _this.height = null\r\n    _this.orientationChange = __bind(_this.orientationChange, _this)\r\n\r\n    // делаем задержку для андроида\r\n    if (/android/ig.test(navigator.userAgent)) {\r\n      // app.dom.$window.on('orientationchange resize load', function() {\r\n      app.dom.$window.on('load', function () {\r\n        return setTimeout(_this.orientationChange, _androidDelay)\r\n      })\r\n    } else {\r\n      app.dom.$window.on(_events, _this.orientationChange)\r\n    }\r\n    _this.orientationChange()\r\n  }\r\n\r\n  Size.prototype = {\r\n\r\n    orientationChange: function () {\r\n      const that = this\r\n      let prevHeight = that.height\r\n      let prevWidth = that.width\r\n\r\n      // на больших компах или ноутах с тач экраном приводит\r\n      // к неправильному определеню ширины экрана\r\n      // that.width = Modernizr.touch ? window.innerWidth : app.dom.$window.width();\r\n      that.height = Modernizr.touch ? window.innerHeight : app.dom.$window.height()\r\n\r\n      that.width = app.dom.$window.width()\r\n      that.width = Math.max(_minWidth, that.width)\r\n      that.height = Math.max(_minHeight, that.height)\r\n\r\n      if (that.width !== prevWidth || that.height !== prevHeight) {\r\n        app.trigger('resize', that.getSize())\r\n      }\r\n    },\r\n\r\n    getSize: function () {\r\n      return {\r\n        width: this.width,\r\n        height: this.height\r\n      }\r\n    }\r\n  }\r\n\r\n  return new Size()\r\n})()\r\n","'use strict'\r\n\r\napp.ns('app.core').Behavior = Backbone.View.extend({\r\n\r\n  target: '[data-behavior]',\r\n\r\n  initialize: function (config) {\r\n    const self = this\r\n    self.params = config.params || self.defaults\r\n  },\r\n\r\n  render: function () {\r\n    app.core.Behavior.__super__.render.apply(this, arguments)\r\n    const self = this\r\n    let $targets = self.$(self.target)\r\n\r\n    self.$targets = $targets\r\n    self.initAll($targets)\r\n  },\r\n\r\n  remove: function () {\r\n    this.stopListening()\r\n    return this\r\n  },\r\n\r\n  initAll: function ($targets) {\r\n    const self = this\r\n    _.map($targets, _.flow($, _.bind(self.initEach, self)))\r\n  },\r\n\r\n  initEach: function () {\r\n  },\r\n\r\n  getParams: function (data) {\r\n    const self = this\r\n    let result = {}\r\n    let datas = self.datas\r\n\r\n    _.each(datas, function (dataName, paramName) {\r\n      const value = data[dataName]\r\n      if (value) result[paramName] = value\r\n    })\r\n    return result\r\n  },\r\n\r\n  getOption: function (key, params, validator) {\r\n    const self = this\r\n    let ops = self.params\r\n    let dfs = self.defaults\r\n    let candidats = [params[key], ops[key], dfs[key]]\r\n    let res\r\n\r\n    validator = validator || _.negate(_.isUndefined)\r\n    candidats = _.map(candidats, self._getValue)\r\n    res = _.find(candidats, validator)\r\n    return res\r\n  },\r\n  _getValue: function (value) {\r\n    return _.isFunction(value) ? value() : value\r\n  }\r\n})\r\n",";(function () {\r\n  const View = app.ns('app.core').View = Backbone.View.extend({\r\n    subView: {},\r\n    constructor: function (options) {\r\n      const self = this\r\n      const newOptions = ['ui', 'gui', 'tpls', 'behaviors', 'subView', 'subViews']\r\n      options = options || {}\r\n      applyOptions.call(self, options, newOptions)\r\n      self.behaviors = []\r\n      self.subView = {}\r\n      self.subViews = []\r\n      normalizeEvents.call(self, options)\r\n      View.__super__.constructor.apply(self, [options])\r\n    },\r\n    _setElement: function () {\r\n      const self = this\r\n      View.__super__._setElement.apply(self, arguments)\r\n      initUIs.call(self)\r\n      initTpls.call(self)\r\n      clearBehaviors.call(self)\r\n      initBehaviors.call(self)\r\n      clearSubViews.call(self)\r\n      initSubViews.call(self)\r\n    },\r\n    remove: function () {\r\n      const self = this\r\n      self.off()\r\n      app.off(null, null, self)\r\n      clearUIs.call(self)\r\n      clearTpls.call(self)\r\n      clearBehaviors.call(self)\r\n      clearSubViews.call(self)\r\n      View.__super__.remove.apply(self, arguments)\r\n    }\r\n  })\r\n\r\n  function applyOptions (options, applyList) {\r\n    const self = this\r\n    _.each(_.pick(_.defaults(options, self), applyList), function (option, optionName) {\r\n      self[optionName] = option\r\n      self['_' + optionName] = _.clone(option)\r\n    })\r\n  }\r\n\r\n  function initUIs () {\r\n    const self = this\r\n    self.ui = _.reduce(self._ui, function (ui, selector, key) {\r\n      ui[key] = self.$(selector)\r\n      return ui\r\n    }, {})\r\n    self.gui = _.reduce(self._gui, function (gui, selector, key) {\r\n      gui[key] = $(selector)\r\n      return gui\r\n    }, {})\r\n  }\r\n\r\n  function clearUIs () {\r\n    const self = this\r\n    _.invoke(self.ui, 'off')\r\n    self.ui = {}\r\n    _.invoke(self.gui, 'off')\r\n    self.gui = {}\r\n  }\r\n\r\n  function normalizeEvents (options) {\r\n    this.events = normalizeKeys.call(this, this.events)\r\n    options.events = normalizeKeys.call(this, options.events)\r\n  }\r\n\r\n  function normalizeKeys (hash) {\r\n    const self = this\r\n    return _.reduce(hash, function (memo, val, key) {\r\n      const normalizedKey = normalizeUIString.call(self, key)\r\n      memo[normalizedKey] = val\r\n      return memo\r\n    }, {})\r\n  }\r\n\r\n  function normalizeUIString (uiString) {\r\n    const self = this\r\n    const ui = self._ui\r\n    return uiString.replace(/@ui\\.[a-zA-Z-_$0-9]*/g, function (r) {\r\n      return ui[r.slice(4)]\r\n    })\r\n    // .replace(/@gui\\.[a-zA-Z-_$0-9]*/g, function(r) {\r\n    //    return gui[r.slice(5)];\r\n    // });\r\n  }\r\n\r\n  function initTpls () {\r\n    const self = this\r\n    self.tpls = _.reduce(self._tpls, function (tpls, selector, key) {\r\n      const $tpl = $(['[id=\"', selector, '\"]'].join(''))\r\n      let tpl\r\n      if ($tpl.length) {\r\n        tpl = $tpl.html()\r\n      } else {\r\n        tpl = selector\r\n      }\r\n      tpls[key] = _.template(tpl)\r\n      return tpls\r\n    }, {})\r\n  }\r\n\r\n  function clearTpls () {\r\n    const self = this\r\n    self.tpls = {}\r\n  }\r\n\r\n  function initBehaviors () {\r\n    const self = this\r\n    self.behaviors = []\r\n    _.each(self._behaviors, function (Behavior) {\r\n      let params = {}\r\n      let el\r\n      if (_.isObject(Behavior)) {\r\n        params = Behavior.params\r\n        el = Behavior.el\r\n        Behavior = Behavior.behavior\r\n      }\r\n      if ((Behavior = app.ns('behaviors', app)[Behavior])) {\r\n        let behavior = new Behavior({\r\n          el: el || self.$el,\r\n          params: params\r\n        })\r\n        self.behaviors.push(behavior)\r\n        behavior.render()\r\n      }\r\n    })\r\n  }\r\n\r\n  function clearBehaviors () {\r\n    const self = this\r\n    if (self.behaviors) {\r\n      _.each(self.behaviors, function (item, key) {\r\n        app.off(null, null, item)\r\n        item.remove()\r\n        delete (self.behaviors[key])\r\n      })\r\n      self.behaviors = []\r\n    }\r\n  }\r\n\r\n  function initSubViews () {\r\n    const self = this\r\n    _.each(self._subViews, function (subView) {\r\n      let params = normalizeSubViewParams(subView)\r\n      let el = params.el\r\n      params.SubView = params.subView\r\n      if (el) {\r\n        el = self.$(el)\r\n        _.each(el, function (item) {\r\n          let _subView = new params.SubView(_.defaults({el: item}, params.options))\r\n          self.subViews.push(_subView)\r\n          _subView.render()\r\n        })\r\n      } else {\r\n        let _subView = new params.SubView(params.options)\r\n        self.subViews.push(_subView)\r\n        _subView.render()\r\n      }\r\n    })\r\n    _.each(self._subView, function (subView, key) {\r\n      let params = normalizeSubViewParams(subView)\r\n      params.SubView = params.subView\r\n      let _subView = new params.SubView(params.options)\r\n      self.subView[key] = _subView\r\n      _subView.render()\r\n    })\r\n  }\r\n\r\n  function normalizeSubViewParams (subView) {\r\n    let options = {}\r\n    let el = false\r\n    if (_.isObject(subView)) {\r\n      options = subView.options || {}\r\n      el = subView.el || el\r\n      subView = subView.subView\r\n    }\r\n    if (_.isString(subView)) {\r\n      subView = app.subViews[subView]\r\n    }\r\n    return {\r\n      subView: subView,\r\n      options: options,\r\n      el: el\r\n    }\r\n  }\r\n\r\n  function clearSubViews () {\r\n    const self = this\r\n    _.each(self.subView, function (item, key) {\r\n      app.off(null, null, item)\r\n      item.remove()\r\n      delete (self.subView[key])\r\n    })\r\n    self.subView = {}\r\n    _.each(self.subViews, function (item, key) {\r\n      app.off(null, null, item)\r\n      item.remove()\r\n      delete (self.subViews[key])\r\n    })\r\n    self.subViews = []\r\n  }\r\n}())\r\n","'use strict'\r\n\r\n/**\r\n * class  app.views.Default\r\n * @extends  Backbone.View\r\n */\r\napp.ns('app.core').Page = app.core.View.extend({\r\n\r\n  loader: null,\r\n  popup: null,\r\n  html: null,\r\n  needGoIn: false,\r\n  className: null,\r\n  pageHolder: null,\r\n  $bigGallery: null,\r\n\r\n  defLoadAllImages: null,\r\n  defGoIn: null,\r\n  defLoaderHide: null,\r\n  defaultLoaderHide: true,\r\n\r\n  initialize: function () {\r\n    this.loader = app.components.loader\r\n    // this.popup = app.components.PopUp;\r\n\r\n    app.on('checkGetParams', this.checkGetParams, this)\r\n  },\r\n\r\n  /**\r\n   * Во вьюху пришел html\r\n   * @param {String}    html\r\n   * @param {String}    className\r\n   */\r\n  setProps: function (html, className) {\r\n    this.html = html\r\n    this.className = className\r\n  },\r\n\r\n  render: function () {\r\n    const self = this\r\n\r\n    // принцип загрузки страницы\r\n    // 1. Показываем прелоадер\r\n    // 2. Добавляем дом с контентом из аякса\r\n    // 3. Ждем пока загрузятся все отмеченые картинки\r\n    // 4. После этого идет инициализация всех скриптов вьюхи\r\n    // 5. После этого скрываем прелоадер и проводим анимацию появления контента страницы\r\n\r\n    self.defLoadAllImages = $.Deferred()\r\n    self.defRenderEnd = $.Deferred()\r\n\r\n    self.defLoaderHide = $.when(self.defLoadAllImages, self.defRenderEnd)\r\n    self.defLoaderHide.done(function () {\r\n      // console.log('defLoaderHide')\r\n      self.goIn()\r\n      self.loader.hide()\r\n    })\r\n\r\n    app.dom.$window.scrollTop(0)\r\n\r\n    if (self.html) {\r\n      app.GlobalView.$el.append(self.html)\r\n      self.setElement(app.GlobalView.$el.find('[data-view=\"' + self.className + '\"]'))\r\n      app.trigger('dom.append')\r\n    }\r\n\r\n    const $waitToLoad = $('[data-wait-to-load]')\r\n    // let n = 0\r\n    const all = $waitToLoad.length\r\n\r\n    if (all) {\r\n      const multiLoader = new app.components.Multiloader($waitToLoad.length)\r\n      multiLoader.addCallback(function () {\r\n        // когда все картинку будут загружены, резолвим дефферер\r\n        // console.log('multiLoader.addCallback')\r\n        self.defLoadAllImages.resolve()\r\n      })\r\n\r\n      $waitToLoad.each(function (key, value) {\r\n        const image = new Image()\r\n        image.onload = function () {\r\n          multiLoader.createStack()()\r\n          // n++;\r\n\r\n          // self.loader.percentage(n,all);\r\n\r\n          if ($(value).is('img')) {\r\n            $(value).attr('src', this.src)\r\n          }\r\n        }\r\n\r\n        if ($(this).is('img')) {\r\n          image.src = $(this).data('waitToLoad')\r\n        } else {\r\n          image.src = app.utils.getBackgroundImageUrl($(this))\r\n        }\r\n      })\r\n    } else {\r\n      self.defLoadAllImages.resolve()\r\n    }\r\n  },\r\n\r\n  afterRender: function () {\r\n    this.defRenderEnd.resolve()\r\n    this.checkGetParams()\r\n  },\r\n\r\n  checkGetParams: function () {\r\n    if (!app.utils.getData) {\r\n      app.utils.getData = app.utils.parseUrlQuery(window.location.search)\r\n    }\r\n\r\n    let $target\r\n\r\n    if (app.utils.getData['goto']) {\r\n      $target = $(app.utils.getData['goto'])\r\n      if ($target.length) {\r\n        if (!app.Router._pageCounter) {\r\n          $(window).load(_helper)\r\n        } else {\r\n          _helper()\r\n        }\r\n      }\r\n    } else {\r\n      $target = $('body')\r\n      _helper()\r\n    }\r\n\r\n    function _helper () {\r\n      /* var index = -1;\r\n      var section = window.location.pathname.split('/')[1];\r\n\r\n      if (app.utils.getData['goto'] == 'guarantee') index = 5;\r\n        else if (section == 'information') index = 4;\r\n\r\n      if (index > -1) app.GlobalView.selectCurrentMenu(index); */\r\n\r\n      setTimeout(function () {\r\n        $('html, body').stop(true, true).animate({'scrollTop': $target.offset().top}, 500)\r\n      }, 310)\r\n    }\r\n  },\r\n\r\n  goOutDefault: function () {\r\n    const self = this\r\n    app.trigger('View.goOutDefaultStart')\r\n    // self.$el.fadeOut(600, function(){\r\n    setTimeout(function () {\r\n      self.remove()\r\n      app.trigger('View.goOutDefaultEnd')\r\n    }, 300)\r\n\r\n    // });\r\n  },\r\n\r\n  goIn: function () {\r\n    const self = this\r\n    self.$el.css({'display': 'none'})\r\n    self.$el.fadeIn(600)\r\n    app.trigger('View.goIn')\r\n  },\r\n\r\n  remove: function () {\r\n    const self = this\r\n    self.trigger('remove')\r\n    app.core.Page.__super__.remove.apply(self, arguments)\r\n  },\r\n\r\n  initGoto: function () {\r\n    this.$el.on('click', '[data-goto]', function (e) {\r\n      e.preventDefault()\r\n      $('html, body').animate({'scrollTop': $($(this).data('goto')).offset().top - app.Header.$el.find('[data-head-top]').height()}, 500)\r\n    })\r\n  }\r\n\r\n})\r\n","(function () {\r\n  'use strict'\r\n\r\n  const el = '[data-behavior]'\r\n  const subView = app.ns('app.behaviors').Behavior1 = app.core.Behavior.extend({\r\n    target: el,\r\n\r\n    initEach: function ($target) {\r\n      console.log('%c%s', 'color: indigo', 'Behavior1 render', $target)\r\n    }\r\n  })\r\n  subView.el = el\r\n}())\r\n","'use strict'\r\n\r\n/**\r\n * class  app.views.Footer\r\n * @extends  Backbone.View\r\n */\r\napp.ns('app.views').Footer = app.core.View.extend({\r\n\r\n  el: '.footer',\r\n\r\n  render: function () {\r\n    app.views.Footer.__super__.render.apply(this, arguments)\r\n  }\r\n\r\n})\r\n","'use strict'\r\n\r\napp.ns('app.views').GlobalView = Backbone.View.extend({\r\n\r\n  oldViews: [],\r\n  currentView: null,\r\n  loader: null,\r\n  menuItems: null,\r\n\r\n  initialize: function () {\r\n    this.loader = app.components.loader\r\n    this.menuItems = $('[data-head-menu-item]')\r\n  },\r\n\r\n  selectCurrentMenu: function (id) {\r\n    if (id === undefined) id = 0\r\n    this.menuItems.removeClass('_active')\r\n      .filter('[data-head-menu-item=\"' + id + '\"]').addClass('_active')\r\n  },\r\n\r\n  show: function (View) {\r\n    const self = this\r\n    View.render()\r\n    self.currentView = View\r\n  },\r\n\r\n  hide: function () {\r\n    const self = this\r\n    app.once('View.goOutDefaultStart', function () {\r\n      self.loader.show()\r\n    })\r\n    self.currentView.goOutDefault()\r\n  },\r\n\r\n  setTitle: function (title) {\r\n    $('title').html(title)\r\n  }\r\n\r\n})\r\n","'use strict'\r\n\r\napp.ns('app.views').Header = app.core.View.extend({\r\n\r\n  el: '.header',\r\n  subView: {},\r\n\r\n  initialize: function () {\r\n\r\n  },\r\n\r\n  render: function () {\r\n    app.views.Header.__super__.render.apply(this, arguments)\r\n  }\r\n})\r\n","app.ns('app.views').Index = app.core.Page.extend({\r\n\r\n  events: {\r\n  },\r\n\r\n  behaviors: [\r\n    // 'Behavior1'\r\n  ],\r\n\r\n  subView: {\r\n    // subView1: 'subView1'\r\n  },\r\n\r\n  initialize: function () {\r\n    app.views.Index.__super__.initialize.apply(this, arguments)\r\n  },\r\n\r\n  remove: function () {\r\n    app.views.Index.__super__.remove.apply(this, arguments)\r\n  },\r\n\r\n  render: function () {\r\n    app.views.Index.__super__.render.apply(this, arguments)\r\n\r\n    app.views.Index.__super__.afterRender.apply(this, arguments)\r\n  }\r\n})\r\n\r\nfunction _calendar () {\r\n  var book1 = ['2019-1-21', '2019-1-24', '2019-1-27', '2019-1-29']\r\n  var book2 = ['2019-1-21', '2019-1-24']\r\n  var book3 = ['2019-1-21']\r\n  var book4 = ['2019-2-1']\r\n  var book5 = ['2019-2-4']\r\n  var book6 = ['2019-2-5']\r\n  var book7 = ['2019-2-21']\r\n  $('.datepicker').datepicker({\r\n    numberOfMonths: 3,\r\n    language: 'ru',\r\n    minDate: 0,\r\n    beforeShowDay: function (date) {\r\n      var m = date.getMonth()\r\n      var d = date.getDate()\r\n      var y = date.getFullYear()\r\n      for (var $b7 = 0; $b7 < book7.length; $b7++) {\r\n        if ($.inArray(y + '-' + (m + 1) + '-' + d, book7) !== -1) {\r\n          return [true, 'ui-state-active__n7', '']\r\n        }\r\n      }\r\n      for (var $b6 = 0; $b6 < book6.length; $b6++) {\r\n        if ($.inArray(y + '-' + (m + 1) + '-' + d, book6) !== -1) {\r\n          return [true, 'ui-state-active__n6', '']\r\n        }\r\n      }\r\n      for (var $b5 = 0; $b5 < book5.length; $b5++) {\r\n        if ($.inArray(y + '-' + (m + 1) + '-' + d, book5) !== -1) {\r\n          return [true, 'ui-state-active__n5', '']\r\n        }\r\n      }\r\n      for (var $b4 = 0; $b4 < book4.length; $b4++) {\r\n        if ($.inArray(y + '-' + (m + 1) + '-' + d, book4) !== -1) {\r\n          return [true, 'ui-state-active__n4', '']\r\n        }\r\n      }\r\n      for (var $b3 = 0; $b3 < book3.length; $b3++) {\r\n        if ($.inArray(y + '-' + (m + 1) + '-' + d, book3) !== -1) {\r\n          return [true, 'ui-state-active__n3', '']\r\n        }\r\n      }\r\n      for (var $b2 = 0; $b2 < book2.length; $b2++) {\r\n        if ($.inArray(y + '-' + (m + 1) + '-' + d, book2) !== -1) {\r\n          return [true, 'ui-state-active__n2', '']\r\n        }\r\n      }\r\n      for (var $b1 = 0; $b1 < book1.length; $b1++) {\r\n        if ($.inArray(y + '-' + (m + 1) + '-' + d, book1) !== -1) {\r\n          return [true, 'ui-state-active__n1', '']\r\n        }\r\n      }\r\n      return [true]\r\n    },\r\n    onSelect: function (dateText, inst) {\r\n      console.log('dateText ' + dateText)\r\n      $('.time-select, .sheme--container, .calendar--form').slideUp()\r\n      $('.place').removeClass('place__selected')\r\n      $('.time-select').slideDown()\r\n    }\r\n  })\r\n}\r\n\r\nfunction _selectPlace () {\r\n  $('.time-select--label').click(function () {\r\n    $('.calendar--form').slideUp()\r\n    $('.sheme--container').slideDown()\r\n    $('.place').removeClass('place__selected')\r\n  })\r\n  $('.place').click(function () {\r\n    if ($(this).hasClass('place__booking')) {} else {\r\n      $(this).toggleClass('place__selected')\r\n      $('.place__selected').length !== 0 ? $('.calendar--form').slideDown() : $('.calendar--form').slideUp()\r\n    }\r\n  })\r\n}\r\n\r\n$(document).ready(\r\n  _calendar(),\r\n  _selectPlace()\r\n)\r\n","'use strict'\r\n\r\n/**\r\n * @class app.views.NotFound\r\n * @extends app.core.Page\r\n */\r\napp.ns('app.views').NotFound = app.core.Page.extend({\r\n\r\n  remove: function () {\r\n    app.views.NotFound.__super__.remove.apply(this, arguments)\r\n  },\r\n\r\n  render: function () {\r\n    app.views.NotFound.__super__.render.apply(this, arguments)\r\n  }\r\n\r\n})\r\n","(function () {\r\n  'use strict'\r\n\r\n  const el = '[data-subview1]'\r\n\r\n  const subView = app.ns('app.subViews').subView1 = app.core.View.extend({\r\n\r\n    el: el,\r\n\r\n    behaviors: [],\r\n    subView: {},\r\n    subViews: [],\r\n    ui: {},\r\n    gui: {},\r\n    events: {},\r\n    cls: {},\r\n    data: {},\r\n\r\n    initialize: function () {\r\n      subView.__super__.initialize.apply(this, arguments)\r\n    },\r\n\r\n    remove: function () {\r\n      subView.__super__.remove.apply(this, arguments)\r\n      console.log('%c%s', 'color: darkorange', 'subView1 remove')\r\n    },\r\n\r\n    render: function () {\r\n      subView.__super__.render.apply(this, arguments)\r\n      console.log('%c%s', 'color: orange', 'subView1 render')\r\n    }\r\n  })\r\n\r\n  subView.el = el\r\n}())\r\n","'use strict'\r\n\r\n/**\r\n * @class  app.modules.Router\r\n * @extends  Backbone.Router\r\n */\r\napp.modules.Router = Backbone.Router.extend({\r\n\r\n  _pageCounter: 0,\r\n\r\n  routes: {\r\n    '*href': 'baseRout'\r\n  },\r\n\r\n  lastPath: false,\r\n  curPath: false,\r\n\r\n  baseRout: function () {\r\n    const self = this\r\n    let path = Backbone.history.fragment || './'\r\n    let View = 'NotFound'\r\n    let view\r\n\r\n    self.lastPath = self.curPath\r\n    self.curPath = path\r\n    if (!this._pageCounter) {\r\n      const $view = $('[data-view]')\r\n      if ($view.length) {\r\n        if ($.trim($view.data('view')) !== '') {\r\n          View = app.views[$view.data('view')]\r\n          view = new View({el: $view})\r\n          app.GlobalView.show(view)\r\n          console.log('%cТекущая вьюшка = %s', 'color: green', $view.data('view'))\r\n        } else {\r\n          console.log('%c[data-view] не заполнено', 'color: red')\r\n        }\r\n      } else {\r\n        console.log('%c[data-view] не найдено', 'color: red')\r\n      }\r\n    } else {\r\n      // стандартное смена страниц через\r\n      // fadeOut->display preloader->none preloader->fadeIn\r\n      let p1 = $.Deferred()\r\n      let p2 = $.Deferred()\r\n      let p3 = $.when(p1, p2)\r\n\r\n      p3.done(function () {\r\n        if (view.html) {\r\n          app.GlobalView.show(view)\r\n        }\r\n      })\r\n\r\n      app.once('View.goOutDefaultEnd', function () {\r\n        p1.resolve()\r\n      })\r\n      app.once('View.ajax.complete', function () {\r\n        p2.resolve()\r\n      })\r\n\r\n      app.GlobalView.hide()\r\n\r\n      $.get(path, {\r\n        _: _.now()\r\n      }, function (data) {\r\n        if (data.jsview) {\r\n          if ($.trim(data.jsview) !== '') {\r\n            view = new app.views[data.jsview]()\r\n            view.setProps(\r\n              data.body,\r\n              data.jsview\r\n            )\r\n            view.needGoIn = true\r\n            app.trigger('View.ajax.complete')\r\n            app.GlobalView.setTitle(data.title)\r\n            app.GlobalView.selectCurrentMenu(data.sectionId)\r\n            console.log('%cТекущая вьюшка = %s', 'color: green', data.jsview)\r\n          } else {\r\n            console.log('%c[data-view] не заполнено', 'color: red')\r\n          }\r\n        } else {\r\n          console.log('%c[data-view] не найдено', 'color: red')\r\n        }\r\n      }, 'json')\r\n    }\r\n\r\n    this._pageCounter++\r\n  },\r\n\r\n  back: function () {\r\n    const self = this\r\n    if (self.lastPath) {\r\n      self.lastPath = self.curPath = false\r\n      window.history.back()\r\n    } else {\r\n      self.lastPath = self.curPath = false\r\n      self.navigate('/', true)\r\n    }\r\n  }\r\n\r\n})\r\n","// Запускаем приложение\r\n$(function () {\r\n  app.initialize()\r\n})\r\n","$(function(){svg4everybody();});"]}